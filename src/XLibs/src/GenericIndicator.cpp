//=================================================================================================
// Generic indicator class
//
// author: Frank van Ierland
// version: 0.1
//
//=================================================================================================

#include "GenericIndicator.h"

//-------------------------------------------------------------------------------------------------
//
//-------------------------------------------------------------------------------------------------
GenericIndicator::GenericIndicator(CanasNodDefaultID CANid)
{
	_CanAreoId = CANid;
}
//-------------------------------------------------------------------------------------------------
//
//-------------------------------------------------------------------------------------------------
GenericIndicator::~GenericIndicator()
{
	_myCanAreo->ParamUnsubscribe(_CanAreoId);
}

//-------------------------------------------------------------------------------------------------
//
//-------------------------------------------------------------------------------------------------
int GenericIndicator::startCommunication(CANaero * canObject)
{
	_myCanAreo = canObject;
	_myCanAreo->ParamSubscribe(_CanAreoId, this);
	return 0;
}


//-------------------------------------------------------------------------------------------------
//
//-------------------------------------------------------------------------------------------------
void GenericIndicator::powerOff()
{
	DPRINTLN("Start GenericIndicator powerOff");

	_powerOn = false;

	DPRINTLN("End GenericIndicator powerOff");

}

//-------------------------------------------------------------------------------------------------
//
//-------------------------------------------------------------------------------------------------
void GenericIndicator::powerOn()
{
	DPRINTLN("Start GenericIndicator powerOn");
	_powerOn = true;
	DPRINTLN("End GenericIndicator powerOn");
}

//-------------------------------------------------------------------------------------------------
//
//-------------------------------------------------------------------------------------------------
bool GenericIndicator::powerState(bool setOn)
{
		bool oldValue = _powerOn;			

		if (setOn)
			powerOn();
		else
			powerOff();

		return oldValue;;
}

//-------------------------------------------------------------------------------------------------
//
//-------------------------------------------------------------------------------------------------
int GenericIndicator::setCanAeroId(CanasNodDefaultID newCanId)
{
	int oldVal = _CanAreoId;

	if (_CanAreoId != 0)
		_myCanAreo->ParamUnsubscribe(_CanAreoId);

	_CanAreoId = newCanId;
	_initIndicator(newCanId);

	return oldVal;
}

//-------------------------------------------------------------------------------------------------
//
//-------------------------------------------------------------------------------------------------
int GenericIndicator::getCanAeroId(CanasNodDefaultID newCanId)
{
	return _CanAreoId;
}

//-------------------------------------------------------------------------------------------------
//
//-------------------------------------------------------------------------------------------------
int GenericIndicator::type()
{
	return _type;
}

